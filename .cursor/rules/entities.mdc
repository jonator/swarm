---
description: Diagram of resources users have access to for viewing the activity of Swarm AI coding agents and their connected GitHub organizations, repositories, and pull requests
globs: 
alwaysApply: false
---
erDiagram
    User {
        int ID PK
        string email
    }
    Repository {
        int ID PK
        string Owner
        string Name
    }
    Project {
        int ID PK
        string RootDir
        string Type
        string Name
    }
    Organization {
        int ID PK
        string Name
        string Type
    }
    Agent {
        int ID PK
        string Name
        text Context
        string Status
        string Trigger
        string TriggerSourceId
        string GithubPullRequestId
        string GithubIssueId
        string LinearIssueId
        string SlackThreadId
        datetime StartedAt
        datetime CompletedAt
        int ObanJobId FK
        int UserId FK
        int RepositoryId FK
        int ProjectId FK
        datetime InsertedAt
        datetime UpdatedAt
    }

    AgentMessage {
        int ID PK
        int AgentId FK
        string MessageType
        text Content
        json Metadata
        datetime CreatedAt
        int SequenceNumber
    }
    UsersRepositories {
        int UserId FK
        int RepositoryId FK
    }
    UsersOrganizations {
        int UserId FK
        int OrganizationId FK
    }
    OrganizationsRepositories {
        int OrganizationId FK
        int RepositoryId FK
    }

    User ||--o{ UsersRepositories : has
    Repository ||--o{ UsersRepositories : has
    User ||--o{ UsersOrganizations : has
    Organization ||--o{ UsersOrganizations : has
    Organization ||--o{ OrganizationsRepositories : has
    Repository ||--o{ OrganizationsRepositories : has
    Project }o--|| Repository : belongs_to
    
    User ||--o{ Agent : owns
    Repository ||--o{ Agent : contains
    Project ||--o{ Agent : scoped_to
    Agent ||--o{ AgentMessage : generates